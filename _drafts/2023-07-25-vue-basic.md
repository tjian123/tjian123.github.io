---
layout: default
title: Vue3 åŸºæœ¬ç”¨æ³•
description: Vue3 çš„åŸºæœ¬ç”¨æ³•
categories: 
   - æŠ€æœ¯ç§¯ç´¯
tags: 
   - Vue3
   - Frontend
---

> VUE

<!-- more -->
* TOC
{:toc}

|æœ¯è¯­|è¯´æ˜|
|----|----|
|SFC|Single File Componentï¼Œå•æ–‡ä»¶ç»„ä»¶ï¼Œå°† HTMLã€CSSã€JS å°è£…ä¸€ä¸ªå•ä¸€æ–‡ä»¶ä¸­|
|å£°æ˜å¼æ¸²æŸ“|é€šè¿‡æ‰©å±•æ ‡å‡† HTML çš„æ¨¡æ¿è¯­æ³•ï¼Œä½¿ç”¨ JS æè¿° HTML |

### 1. å£°æ˜å¼æ¸²æŸ“

å“åº”å¼ API

* `ref()`ï¼Œå¯ä»¥ç»‘å®šä»»æ„å€¼
* `reactive()`ï¼Œåªèƒ½ç»‘å®šå¯¹è±¡ç±»å‹ï¼ŒåŒ…æ‹¬è‡ªå®šä¹‰å¯¹è±¡å’Œå†…ç½®å¯¹è±¡ï¼Œæ•°ç»„å’Œsetç­‰

å¦‚ï¼š

```vue
<script setup>
import {ref, reactive} from 'vue'

const counter = reactive({
    count:0
})

const message = ref("Hello")
</script>

<template>
<h1>{{ message }}</h1>
<p>count is :{{ counter.count }}</p>
</templatet>
```

### 2. `Attribute` ç»‘å®š

ä½¿ç”¨ `v-bind:attributeName` å¯ä»¥ç»™å…ƒç´ åŠ¨æ€ç»‘å®šå€¼ï¼Œ`v-bind` è¿˜å¯ä»¥çœç•¥

```vue
<script setup>
import {ref} from 'vue'

const titleClass = ref('title')
</script>

<template>
<h1 :class="titleClass">Header</h1>
</template>

<style>
.title {
    color: red;
}
</style>
```

### 3. äº‹ä»¶ç›‘å¬

ä½¿ç”¨ `v-on` æŒ‡ä»¤æ¥ç›‘å¬ DOM äº‹ä»¶ï¼Œå¦‚ä½¿ç”¨ `v-on:click` ç›‘å¬ç‚¹å‡»äº‹ä»¶ï¼Œå¯ç®€å†™ä¸º `@click`

```vue
<script setup>
import { ref } from 'vue'

const count = ref(0)

function add() {
  count.value ++
}
</script>

<template>
  <!-- ä½¿æ­¤æŒ‰é’®ç”Ÿæ•ˆ -->
  <button @click="add">count is: {{ count }}</button>
</template>
```

### 4. è¡¨å•ç»‘å®š

å¯ä»¥åŒæ—¶ä½¿ç”¨ `v-bind` å’Œ `v-on` åœ¨è¡¨å•å…ƒç´ ä¸Šåˆ›å»ºåŒå‘ç»‘å®š

å¦‚ä¸‹è¾“å‡ºæ¡†ï¼Œä¼šåœ¨è¾“å…¥å†…å®¹æ—¶åŒæ­¥æ”¹å˜æ–‡æœ¬å€¼ï¼š

```vue
<script setup>
import { ref } from 'vue'

const text = ref('')

function onInput(e) {
    text.value = e.target.value
}
</script>

<template>
<input :value='text' @input='onInput' place-holder="Type here"/>
<p>{{ text }}</p>
</template>
```

è¿™ç§åŒå‘ç»‘å®šå¤ªè¿‡äºé¢‘ç¹ï¼ŒVUE æä¾›äº† `v-model` ç®€åŒ–è¿™ç§åŒå‘ç»‘å®šï¼Œå¦‚ `<input v-model='text' place-holder="Type here"/>`

`v-model` ä¸ä»…æ”¯æŒæ–‡æœ¬æ¡†ï¼Œè¿˜æ”¯æŒå¤é€‰æ¡†ã€å•é€‰æ¡†ã€ä¸‹æ‹‰æ¡†ç­‰å…ƒç´ ã€‚

### 5. æ¡ä»¶æ¸²æŸ“

ä½¿ç”¨ `v-if` å’Œ `v-else` æ¥å®ç°æœ‰æ¡ä»¶çš„æ¸²æŸ“

```vue
<script setup>
import { ref } from 'vue'

const awesome = ref(true)

function toggle() {
  awesome.value = !awesome.value
}
</script>

<template>
  <button @click="toggle">toggle</button>
  <h1 v-if="awesome">Vue is awesome!</h1>
  <h1 v-else>Oh no ğŸ˜¢</h1>
</template>
```

### 6. åˆ—è¡¨æ¸²æŸ“

ä½¿ç”¨ `v-for` æ¥æ¸²æŸ“åŸºäºæ•°ç»„çš„åˆ—è¡¨

```vue
<script setup>
const newTodo = ref('')
const todos = ref([
  { id: id++, text: 'Learn HTML' },
  { id: id++, text: 'Learn JavaScript' },
  { id: id++, text: 'Learn Vue' }
])

function addTodo() {
  todos.value.push({ id: id++, text: newTodo.value })
  newTodo.value = ''
}

function removeTodo(todo) {
  todos.value = todos.value.filter((t) => t !== todo)
}
</script>

<template>
  <form @submit.prevent="addTodo">
    <input v-model="newTodo">
    <button>Add Todo</button>    
  </form>
  <ul>
    <li v-for="todo in todos" :key="todo.id">
      {{ todo.text }}
      <button @click="removeTodo(todo)">X</button>
    </li>
  </ul>
</template>
```

### 7. è®¡ç®—å±æ€§

ä½¿ç”¨ `computed` API åŠ¨æ€ç»‘å®šä¸€ä¸ªå˜é‡çš„å¤„ç†è¿‡ç¨‹

### 8. ç”Ÿå‘½å‘¨æœŸå’Œæ¨¡æ¿å¼•ç”¨

ç”Ÿå‘½å‘¨æœŸï¼š

```mermaid
flowchart LR

Setup --> BeforeCreate --> Created --> BeforeMount --> Mounted --> BeforeUpdate --> Updated --> BeforeUnmount --> Unmounted 
```

`Setup` é˜¶æ®µï¼ŒDOM å°šæœªæ¸²æŸ“ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `ref attribute` å®ç°æ¨¡æ¿å¼•ç”¨ï¼Œåœ¨ `Mounted` åä¿®æ”¹å‰æœŸå¼•ç”¨çš„ DOMã€‚

### 9. ä¾¦å¬å™¨

æœ‰æ—¶æˆ‘ä»¬éœ€è¦å“åº”å¼çš„æ‰§è¡Œä¸€äº›ä»»åŠ¡ï¼Œæ¯”å¦‚å½“ä¸€ä¸ªæ•°å­—æ”¹å˜æ—¶åœ¨æ§åˆ¶å°è¾“å‡ºï¼Œå°±å¯ä»¥ä½¿ç”¨ä¾¦å¬å™¨ï¼Œé€šè¿‡ `watch` å®ç°

### 10. ç»„ä»¶

çˆ¶ç»„ä»¶å¯ä»¥åœ¨æ¨¡æ¿ä¸­åµŒå¥—å¦ä¸€ä¸ªç»„ä»¶ä½œä¸ºå­ç»„ä»¶ï¼Œè¦ä½¿ç”¨å­ç»„ä»¶ï¼Œæˆ‘ä»¬éœ€è¦å…ˆå¯¼å…¥ï¼Œå¦‚ `import ChildComp from './ChildComp.vue'`ï¼Œç„¶åå°±å¯ä»¥ä½¿ç”¨ `<ChildComp />` å¼•ç”¨å­ç»„ä»¶

### 11. Props ä¼ å€¼

çˆ¶ç»„ä»¶å¯ä»¥é€šè¿‡ `Props` å‘å­ç»„ä»¶ä¼ é€’å€¼

é¦–å…ˆéœ€è¦åœ¨å­ç»„ä»¶ä¸­é€šè¿‡ `defineProps()` å£°æ˜

### 12. Emits è§¦å‘äº‹ä»¶

å­ç»„ä»¶å¯ä»¥é€šè¿‡ `Emits` è§¦å‘çˆ¶ç»„ä»¶ä¸­çš„äº‹ä»¶

é¦–å…ˆéœ€è¦é€šè¿‡ `defineEmits()` åœ¨å­ç»„ä»¶ä¸­å®šä¹‰ï¼Œçˆ¶ç»„ä»¶é€šè¿‡ `v-on` æ¥ç›‘å¬å­ç»„ä»¶ä¼ é€’çš„äº‹ä»¶

```vue
<script setup>
import { ref } from 'vue'
import ChildComp from './ChildComp.vue'

const childMsg = ref('No child msg yet')
</script>

<template>
  <ChildComp @response="(msg) => childMsg = msg"/>
  <p>{{ childMsg }}</p>
</template>
```

### 13. æ’æ§½ Slot

çˆ¶ç»„ä»¶è¿˜å¯ä»¥é€šè¿‡æ’æ§½å°†æ¨¡æ¿ç‰‡æ®µä¼ é€’ç»™å­ç»„ä»¶ï¼Œå¦‚çˆ¶ç»„ä»¶ä¸­ï¼Œ

```vue
<ChildCompn>
    some slots
</ChildComp>
```

åœ¨å­ç»„ä»¶ä¸­è¿™æ ·ä½¿ç”¨ï¼Œ

```vue
<slot/>
Â·Â·Â·
